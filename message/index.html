<!DOCTYPE html>
<html lang="ja">

<head>
	<title>ひたち光教会アプリ</title>
	<meta name="robots" content="noindex,nofollow,noarchive" />
	<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=10.0,user-scalable=yes"
		name="viewport">
	<meta charset="utf-8">

	<meta property="og:url" content="https://hitachihikari.net/message/">
	<meta property="og:title" content="ひたち光教会アプリ">
	<meta property="og:site_name" content="ひたち光教会アプリ">
	<meta property="og:image" content="https://hitachihikari.net/bible.png">

	<link href="https://hitachihikari.net/bible.png" rel="shortcut icon">
	<link href="https://hitachihikari.net/bible.png" rel="apple-touch-icon">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<style type="text/css">
		.col-$1,
		.col-12 col-md-$1,
		.col-xs-4,
		.col-xs-3,
		.col-xs-2 {
			padding-right: 0;
			padding-left: 0;
		}

		audio {
			width: 100%;
		}

		select {
			font-size: 14px;
			border: 1px solid #ccc;
		}

		.movieWraper {
			position: relative;
			width: calc(100% - 10px);
			margin: 0 auto;
		}

		.iframeWrap {
			height: 0;
			padding-bottom: 62.5%;
			position: relative;
		}

		iframe {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	</style>

	<script>
		let list = [];

		fetch("https://hitachihikari.net/message/list.json")
			.then(res => res.json())
			.then(data => {
				list = data;
				readFirst();
			});

		function get_nowTime() {
			const val = document.getElementById("audio")?.currentTime;
			if (val !== undefined) {
				window.localStorage.setItem("nowTime", val);
			}
		}
		setInterval(get_nowTime, 15000);

		$(function () {
			$("select").change(audioset);
		});

		function readFirst() {
			for (const item of list) {
				const opt = document.createElement("option");
				opt.value = item.val;
				opt.text = item.txt;
				document.getElementById("messageSelect").appendChild(opt);
			}
			audioset();
			const val = window.localStorage.getItem("nowTime");
			document.getElementById("audio").currentTime = val;
		}

		function audioset() {
			const selaudio = $("#messageSelect").val().substr(0, 8);
			const audio = new Audio(`./m4a/${selaudio}.m4a`);
			audio.controls = true;
			audio.id = "audio";
			audio.preload = "auto";
			$("#message").html(audio);
			audio.play();
		}

		function skip(seconds) {
			const audio = document.getElementById("audio");
			if (audio) {
				audio.play();
				audio.currentTime += seconds;
			}
		}

		function move(seconds) {
			const audio = document.getElementById("audio");
			if (audio) {
				audio.play();
				audio.currentTime = seconds;
			}
		}

		function rateup(speed) {
			const audio = document.getElementById("audio");
			if (audio) {
				audio.play();
				audio.playbackRate = speed;
			}
		}
	</script>
</head>

<body>
	<div class="container">
		<div class="row">
			<h4 class="text-center">ひたち光教会アプリ</h4>
			<div class="col-xs-12">
				<input class="btn w-100 btn-lg btn-info" onclick="window.location.reload(true);" type="button"
					value="アプリ更新">
			</div>
		</div>
		<hr />
		<div class="row">
			<div class="col-xs-12">
				<label for="messageSelect">礼拝説教：聴きたいものを選んでください</label>
				<select class="form-control" id="messageSelect"></select>
			</div>
			<div class="col-xs-12" id="message"></div>

			<div class="row g-0">
				<div class="col-3"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="skip(-30)"
						type="button" value="<<30秒"></div>
				<div class="col-3"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="skip(-5)"
						type="button" value="<<5秒"></div>
				<div class="col-3"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="skip(5)" type="button"
						value="5秒>>"></div>
				<div class="col-3"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="skip(30)"
						type="button" value="30秒>>"></div>
			</div>
			<div class="row g-0">
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(0.5)"
						type="button" value="x0.5"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(0.8)"
						type="button" value="x0.8"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(1.0)"
						type="button" value="x1.0"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(1.5)"
						type="button" value="x1.5"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(2.0)"
						type="button" value="x2.0"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="rateup(3.0)"
						type="button" value="x3.0"></div>
			</div>
			<div class="row g-0">
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(600)"
						type="button" value="10"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(1200)"
						type="button" value="20"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(1800)"
						type="button" value="30"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(2400)"
						type="button" value="40"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(3000)"
						type="button" value="50"></div>
				<div class="col-2"><input class="btn w-100 btn-lg btn-outline-secondary" onclick="move(3600)"
						type="button" value="60"></div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div class="movieWraper">
					<div class="iframeWrap">
						<iframe
							src="https://onedrive.live.com/embed?cid=DF8117155F580907&amp;resid=DF8117155F580907%211340&amp;authkey=AF6P8Ar7u7YupbA&amp;em=2&amp;wdAr=1.00&amp;wdEaa=0"
							frameborder="0"></iframe>
					</div>
				</div>
				<img src="https://onedrive.live.com/embed?resid=DF8117155F580907%211927&authkey=%21AGrAIvgcSALoIlE"
					class="img-fluid">
				<img src="https://onedrive.live.com/embed?resid=DF8117155F580907%211348&authkey=%21AFqBOdaSYRks83Y"
					class="img-fluid">
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<a class="btn btn-block btn-lg btn-success" href="https://hitachihikari.net">教会ホームページはこちら</a>
			</div>
		</div>
	</div>
</body>

</html>
